{"version":3,"sources":["../../../src/rpc/handlers/describe-transaction.js"],"names":["request","proxy","wrapper","transaction","params","to","Error","data","description","_","processed","annotatedDescription"],"mappings":";;;;;;;AAAA;;AAEe,wBAAgBA,OAAhB,EAAyBC,KAAzB,EAAgCC,OAAhC,EAAyC;AACtD,QAAM,CAACC,WAAW,GAAG,EAAf,IAAqBH,OAAO,CAACI,MAAnC;;AACA,MAAI,CAACD,WAAW,CAACE,EAAjB,EAAqB;AACnB,UAAM,IAAIC,KAAJ,gDAAN;AACD;;AACD,MAAI,CAACH,WAAW,CAACI,IAAjB,EAAuB;AACrB,UAAM,IAAID,KAAJ,kDAAN;AACD;;AAED,MAAIE,WAAJ;;AACA,MAAI;AACFA,IAAAA,WAAW,GAAG,MAAM,mCAAqBL,WAArB,EAAkCD,OAAlC,CAApB;AACD,GAFD,CAEE,OAAOO,CAAP,EAAU,CAAE;;AAEd,MAAID,WAAJ,EAAiB;AACf,QAAI;AACF,YAAME,SAAS,GAAG,MAAM,4CAA8BF,WAA9B,EAA2CN,OAA3C,CAAxB;AACA,aAAO;AACLS,QAAAA,oBAAoB,EAAED,SAAS,CAACC,oBAD3B;AAELH,QAAAA,WAAW,EAAEE,SAAS,CAACF;AAFlB,OAAP;AAID,KAND,CAME,OAAOC,CAAP,EAAU,CAAE;AACf;;AAED,SAAO;AACLD,IAAAA;AADK,GAAP;AAGD","sourcesContent":["import { postprocessRadspecDescription, tryEvaluatingRadspec } from '../../radspec'\n\nexport default async function (request, proxy, wrapper) {\n  const [transaction = {}] = request.params\n  if (!transaction.to) {\n    throw new Error(`Could not describe transaction: missing 'to'`)\n  }\n  if (!transaction.data) {\n    throw new Error(`Could not describe transaction: missing 'data'`)\n  }\n\n  let description\n  try {\n    description = await tryEvaluatingRadspec(transaction, wrapper)\n  } catch (_) {}\n\n  if (description) {\n    try {\n      const processed = await postprocessRadspecDescription(description, wrapper)\n      return {\n        annotatedDescription: processed.annotatedDescription,\n        description: processed.description\n      }\n    } catch (_) {}\n  }\n\n  return {\n    description\n  }\n}\n"],"file":"describe-transaction.js"}